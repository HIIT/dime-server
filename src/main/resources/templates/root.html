<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" xmlns:th="http://www.thymeleaf.org">
<head th:replace="bootstrap :: head"></head>
<body>
  <div th:replace="bootstrap :: navbar (root)"></div>

  <div class="container">

    <div class="starter-template">

      <h1>Welcome to your friendly local Digital Me server <span th:text="'at ' + ${hostname}"></span>!</h1>

      <div th:if="${#httpServletRequest.remoteUser}">
	<p th:text="'So far you have logged ' + ${event_count} + ' events and ' + ${elem_count} + ' information elements.'"></p>

	<div th:unless="${events}" class="alert alert-danger" role="alert">
	  <span class="glyphicon glyphicon-remove" aria-hidden="true"></span> 
	  <span th:text="'No logger data seen in last ' + ${minutes} +' minutes!'">
	  </span>
	</div>
	
	<span th:if="${events}">
	<div class="alert alert-success" role="alert">
	  <span class="glyphicon glyphicon-ok" aria-hidden="true"></span> 
	  DiMe is alive and logging!
	</div>

	<h2 th:text="'Loggers seen in last ' + ${minutes} +' minutes'"></h2>
	<table class="table table-striped">
	  <thead>
	    <tr>
	      <th>Application</th>
	      <th>Device</th>
	      <th>Most recent event</th>
	    </tr>
	  </thead>
	  <tbody>
	    <tr th:each="event,iterStat : ${events}">
	      <td th:text="${event.actor}"></td>
	      <td th:text="${event.origin}"></td>
	      <td><a th:href="@{/event(id=${event.id})}" th:text="${event.start}"></a></td>
	    </tr>
	  </tbody>
	</table>
	</span>
      </div>
      <div th:unless="${#httpServletRequest.remoteUser}">
	<p>Please <a th:href="@{/login}">sign in</a> or
	<a th:href="@{/user/create}">register</a>.</p>
      </div>
    </div>
  </div>
    
  <div th:replace="bootstrap :: js"></div>
</body>
</html>
