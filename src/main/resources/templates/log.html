<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" xmlns:th="http://www.thymeleaf.org">
<head th:replace="bootstrap :: head"></head>
<body>
  <div th:replace="bootstrap :: navbar (log)"></div>

    <div class="container">

      <div class="starter-template">

	<h1 th:text="'Digital Work Me with ' + ${count} + ' entries'"></h1>
        <h2 th:text="'Hello ' + ${currentUser.username} + '!'"></h2>

	<span th:each="event,iterStat : ${events}">
	  <hr/>
	  <p>
	    [<span th:text="${iterStat.index}"></span>] <b>ID:</b> 
	    <a th:href="@{/event(id=${event.id})}" th:text="${event.id}"></a>
	    <b>Origin:</b> <span th:text="${event.origin}"></span>
	    <b>Actor:</b> <span th:text="${event.actor}"></span><br/>
	    <b>Type:</b> <a th:href="${event.type}" 
			    th:text="${#strings.substringAfter(event.type,'#')}"></a>
	    <b>Time:</b> <span th:text="${event.start}"></span><br/><br/>

	    <span th:if="${event instanceof T(fi.hiit.dime.data.SearchEvent)}">
	      <b>Query:</b> <span th:text="${event.query}"></span><br/><br/>
	    </span>

	    <span th:if="${event instanceof T(fi.hiit.dime.data.DesktopEvent)}">
	    <div th:if="${event.targettedResource}">
	      <b>Information element:</b><br/>
	      <b>ID:</b> <a th:href="@{/infoelem(id=${event.targettedResource.id})}" th:text="${event.targettedResource.id}"></a>
	      <b>URI:</b> <a th:href="${event.targettedResource.uri}" 
			     th:text="${event.targettedResource.uri}"></a><br/>
	      <span th:if="${event.targettedResource.type}">
		<b>Type:</b> <a th:href="${event.targettedResource.type}" 
				th:text="${#strings.substringAfter(event.targettedResource.type,'#')}"></a>
	      </span>
	      <span th:if="${event.targettedResource.isStoredAs}">
		<b>Stored as:</b> <a th:href="${event.targettedResource.isStoredAs}" 
				      th:text="${#strings.substringAfter(event.targettedResource.isStoredAs,'#')}"></a><br/>
	      </span>
	      <!-- <b>Mimetype:</b> <span th:text="${event.targettedResource.mimeType}"></span> -->
	      <b>Text content:</b> <pre th:text="${#strings.abbreviate(event.targettedResource.plainTextContent,500)}"></pre><br/>
	    </div>
	    </span>
	  </p>
	</span>
      </div>
    </div>
    
  <div th:replace="bootstrap :: js"></div>
</body>
</html>
